

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>nim_viosupgrade – Perform an upgrade with the viosupgrade tool &mdash; IBM Power Systems AIX 1.0.0-beta1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="suma – Download/Install fixes, SP or TL on an AIX server." href="suma.html" />
    <link rel="prev" title="nim_vios_hc – Check if a pair of VIOSes can be updated" href="nim_vios_hc.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> IBM Power Systems AIX
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../modules.html">Modules</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../modules.html#module-reference">Module reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="aixpert.html">aixpert – System security settings management.</a></li>
<li class="toctree-l3"><a class="reference internal" href="alt_disk.html">alt_disk – Alternate rootvg disk management.</a></li>
<li class="toctree-l3"><a class="reference internal" href="backup.html">backup – Data or system volume group backup management.</a></li>
<li class="toctree-l3"><a class="reference internal" href="devices.html">devices – Devices management.</a></li>
<li class="toctree-l3"><a class="reference internal" href="emgr.html">emgr – System interim fixes management.</a></li>
<li class="toctree-l3"><a class="reference internal" href="filesystem.html">filesystem – Local and NFS filesystems management.</a></li>
<li class="toctree-l3"><a class="reference internal" href="flrtvc.html">flrtvc – Generate FLRTVC report, download and install efix.</a></li>
<li class="toctree-l3"><a class="reference internal" href="geninstall.html">geninstall – Generic installer for various packaging formats</a></li>
<li class="toctree-l3"><a class="reference internal" href="group.html">group – Create new group or change/remove attributes of group on AIX</a></li>
<li class="toctree-l3"><a class="reference internal" href="inittab.html">inittab – Create/change/remove entries in the inittab file on AIX</a></li>
<li class="toctree-l3"><a class="reference internal" href="installp.html">installp – Installs and updates software</a></li>
<li class="toctree-l3"><a class="reference internal" href="lpp_facts.html">lpp_facts – Returns installed software products as facts</a></li>
<li class="toctree-l3"><a class="reference internal" href="lvg.html">lvg – Create/Modify/Remove a volume group</a></li>
<li class="toctree-l3"><a class="reference internal" href="lvol.html">lvol – Create/Delete logical volume or change characteristics of logical volume on AIX</a></li>
<li class="toctree-l3"><a class="reference internal" href="mkfilt.html">mkfilt – Activates or deactivates the filter rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="mktcpip.html">mktcpip – Sets the required values for starting TCP/IP on a host</a></li>
<li class="toctree-l3"><a class="reference internal" href="mount.html">mount – Mounts/Unmounts a Filesystem/Device</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim.html">nim – Server setup, install packages, update SP or TL.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_backup.html">nim_backup – Use NIM to create, list and restore backup on LPAR and VIOS clients.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_flrtvc.html">nim_flrtvc – Generate flrtvc report, download and install efix</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_suma.html">nim_suma – Download fixes, SP or TL on an AIX server</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_updateios.html">nim_updateios – Use NIM to update a single or a pair of Virtual I/O Servers to latest maintenance level.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_upgradeios.html">nim_upgradeios – Use NIM to update a single or a pair of Virtual I/O Servers.</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_vios_alt_disk.html">nim_vios_alt_disk – Create/Cleanup an alternate rootvg disk</a></li>
<li class="toctree-l3"><a class="reference internal" href="nim_vios_hc.html">nim_vios_hc – Check if a pair of VIOSes can be updated</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">nim_viosupgrade – Perform an upgrade with the viosupgrade tool</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#notes">Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#return-values">Return Values</a></li>
<li class="toctree-l4"><a class="reference internal" href="#status">Status</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="suma.html">suma – Download/Install fixes, SP or TL on an AIX server.</a></li>
<li class="toctree-l3"><a class="reference internal" href="user.html">user – Create new users or change/remove attributes of users on AIX.</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../playbooks.html">Playbooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roles.html">Roles</a></li>
</ul>
<p class="caption"><span class="caption-text">Community Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community_guides.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community_guides.html#helpful-links">Helpful Links</a></li>
</ul>
<p class="caption"><span class="caption-text">Requirements</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../requirements.html">Requirements</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Releases</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IBM Power Systems AIX</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../modules.html">Modules</a> &raquo;</li>
        
      <li>nim_viosupgrade – Perform an upgrade with the viosupgrade tool</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/IBM/ansible-power-aix/blob/dev-collection/docs/source/modules/nim_viosupgrade.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="nim-viosupgrade-perform-an-upgrade-with-the-viosupgrade-tool">
<span id="nim-viosupgrade-module"></span><h1>nim_viosupgrade – Perform an upgrade with the viosupgrade tool<a class="headerlink" href="#nim-viosupgrade-perform-an-upgrade-with-the-viosupgrade-tool" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></p></li>
<li><p><a class="reference internal" href="#requirements" id="id2">Requirements</a></p></li>
<li><p><a class="reference internal" href="#parameters" id="id3">Parameters</a></p></li>
<li><p><a class="reference internal" href="#notes" id="id4">Notes</a></p></li>
<li><p><a class="reference internal" href="#examples" id="id5">Examples</a></p></li>
<li><p><a class="reference internal" href="#return-values" id="id6">Return Values</a></p></li>
<li><p><a class="reference internal" href="#status" id="id7">Status</a></p></li>
</ul>
</div>
<div class="section" id="synopsis">
<h2><a class="toc-backref" href="#id1">Synopsis</a><a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p>Tool to upgrade VIOSes in NIM environment.</p>
</div>
<div class="section" id="requirements">
<h2><a class="toc-backref" href="#id2">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>The below requirements are needed on the host that executes this module.</p>
<ul class="simple">
<li><p>AIX &gt;= 7.1 TL3</p></li>
<li><p>Python &gt;= 2.7</p></li>
</ul>
</div>
<div class="section" id="parameters">
<h2><a class="toc-backref" href="#id3">Parameters</a><a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl>
<dt>action (True, str, None)</dt><dd><p>Specifies the operation to perform.</p>
<p><code class="docutils literal notranslate"><span class="pre">bosinst</span></code> to perform and bosinst installation.</p>
<p><code class="docutils literal notranslate"><span class="pre">altdisk</span></code> to perform and alternate disk installation.</p>
<p><code class="docutils literal notranslate"><span class="pre">get_status</span></code> to get the status of the upgrade.</p>
</dd>
<dt>targets (optional, list, None)</dt><dd><p>NIM targets.</p>
</dd>
<dt>target_file (optional, str, None)</dt><dd><p>Specifies the file name that contains the list of VIOS nodes.</p>
<p>The values and fields in the file must be specified in a particular sequence and format. The details of the format are specified in the /usr/samples/nim/viosupgrade.inst file and they are comma-separated. The maximum number of nodes that can be installed through the -f option is 30.</p>
<p>The VIOS images are installed on the nodes simultaneously.</p>
<p>For an SSP cluster, the viosupgrade command must be run on individual nodes. Out of the n number of nodes in the SSP cluster, maximum n-1 nodes can be upgraded at the same time. Hence, you must ensure that at least one node is always active in the cluster and is not part of the upgrade process.</p>
</dd>
<dt>mksysb_name (optional, dict, None)</dt><dd><p>mksysb name.</p>
</dd>
<dt>spot_name (optional, dict, None)</dt><dd><p>SPOT name.</p>
</dd>
<dt>backup_file (optional, dict, None)</dt><dd><p>Specifies the resource name of the VIOS configuration backup file.</p>
</dd>
<dt>rootvg_clone_disk (optional, dict, None)</dt><dd><p>Clone disk name.</p>
</dd>
<dt>rootvg_install_disk (optional, dict, None)</dt><dd><p>Install disk name.</p>
</dd>
<dt>res_resolv_conf (optional, dict, None)</dt><dd><p>NIM resolv_conf resource name.</p>
</dd>
<dt>res_script (optional, dict, None)</dt><dd><p>NIM script resource name.</p>
</dd>
<dt>res_fb_script (optional, dict, None)</dt><dd><p>NIM fb_script resource name.</p>
</dd>
<dt>res_file_res (optional, dict, None)</dt><dd><p>NIM file_res resource name.</p>
</dd>
<dt>res_image_data (optional, dict, None)</dt><dd><p>NIM image_data resource name.</p>
</dd>
<dt>res_log (optional, dict, None)</dt><dd><p>NIM log resource name.</p>
</dd>
<dt>manage_cluster (optional, bool, False)</dt><dd><p>Specifies that cluster-level backup and restore operations are performed.</p>
<p>The -c flag is mandatory for the VIOS that is part of an SSP cluster.</p>
</dd>
<dt>preview (optional, bool, False)</dt><dd><p>Validates whether VIOS hosts are ready for the installation.</p>
<p>It must be specified only for validation and can be used for preview of the installation image only.</p>
</dd>
<dt>skip_rootvg_cloning (optional, bool, False)</dt><dd><p>Skips the cloning of current rootvg disks to alternative disks and continues with the VIOS installation on the current rootvg disk.</p>
<p>If the storage disks are not available, you can specify the -s flag to continue with the installation.</p>
</dd>
<dt>vios_status (optional, dict, None)</dt><dd><p>Specifies the result of a previous operation.</p>
<p>If set then the <em>vios_status</em> of a target tuple must contain <em>SUCCESS</em> to attempt update.</p>
<p>If no <em>vios_status</em> value is found for a tuple, then returned <em>status</em> for this tuple is set to <em>SKIPPED-NO-PREV-STATUS</em>.</p>
</dd>
<dt>nim_node (optional, dict, None)</dt><dd><p>Allows to pass along NIM node info from a task to another so that it discovers NIM info only one time for all tasks.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="notes">
<h2><a class="toc-backref" href="#id4">Notes</a><a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>See IBM documentation about requirements for the viosupgrade command.</p></li>
</ul>
</div>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id5">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Perform an upgrade of nimvios01</span>
  <span class="nt">nim_viosupgrade</span><span class="p">:</span>
    <span class="nt">targets</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nimvios01</span>
    <span class="nt">action</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">altdisk</span>
</pre></div>
</div>
</div>
<div class="section" id="return-values">
<h2><a class="toc-backref" href="#id6">Return Values</a><a class="headerlink" href="#return-values" title="Permalink to this headline">¶</a></h2>
<dl>
<dt>msg (always, str, )</dt><dd><p>Status information.</p>
</dd>
<dt>targets (always, list, )</dt><dd><p>List of VIOSes.</p>
</dd>
<dt>nim_node (always, dict, )</dt><dd><p>NIM node info.</p>
</dd>
<dt>status (always, dict, )</dt><dd><p>Status for each VIOS (dicionnary key).</p>
<p>When <code class="docutils literal notranslate"><span class="pre">target_file</span></code> is set, then the key is ‘all’.</p>
</dd>
<dt>cmd (If the command was run., str, )</dt><dd><p>Command exectued.</p>
</dd>
<dt>stdout (If the command was run., str, )</dt><dd><p>Standard output of the command.</p>
</dd>
<dt>stderr (If the command was run., str, )</dt><dd><p>Standard error of the command.</p>
</dd>
<dt>meta (always, dict, )</dt><dd><p>Detailed information on the module execution.</p>
<dl>
<dt>messages (always, list, see below)</dt><dd><p>Details on errors/warnings not related to a specific tuple.</p>
</dd>
<dt>&lt;vios&gt; (when target is actually a NIM client, dict, )</dt><dd><p>Detailed information on the execution on the target vios</p>
<dl class="simple">
<dt>messages (always, list, )</dt><dd><p>Details on errors/warnings.</p>
</dd>
<dt>cmd (If the command was run., str, )</dt><dd><p>Command exectued.</p>
</dd>
<dt>stdout (If the command was run., str, )</dt><dd><p>Standard output of the command.</p>
</dd>
<dt>stderr (If the command was run., str, )</dt><dd><p>Standard error of the command.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="status">
<h2><a class="toc-backref" href="#id7">Status</a><a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>This module is not guaranteed to have a backwards compatible interface. <em>[preview]</em></p></li>
<li><p>This module is maintained by community.</p></li>
</ul>
<div class="section" id="authors">
<h3>Authors<a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>AIX Development Team (&#64;pbfinley1911)</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="suma.html" class="btn btn-neutral float-right" title="suma – Download/Install fixes, SP or TL on an AIX server." accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="nim_vios_hc.html" class="btn btn-neutral float-left" title="nim_vios_hc – Check if a pair of VIOSes can be updated" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, IBM

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>